Ø¹Ù„ÙŠÙ‡ Ø§Ù„ØµÙ„Ø§Ø© ÙˆØ§Ù„Ø³Ù„Ø§Ù…. ÙˆÙ„Ø§ ÙŠÙ‡Ù…Ùƒ ÙŠØ§ Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø¯ÙŠ Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ù€ Ø§Ù„Ø¨ÙŠØ¦Ø© (Env) ÙˆØ§Ù„Ù€ CodeØŒ Ø®ØµÙˆØµØ§Ù‹ Ù…Ø¹ Supabase Ùˆ Expo.

Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù„ÙŠ Ø¨ØªÙˆØµÙÙ‡Ø§ (Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙŠÙ‚ÙÙ„ ÙØ¬Ø£Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ ÙˆÙ…Ø´ Ø¨ÙŠÙØªØ­ ØµÙØ­Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙŠØ¨) Ø³Ø¨Ø¨Ù‡Ø§ 99% Ù‡Ùˆ "Supabase Crash".

Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„ÙÙ†ÙŠ: Ù…Ù„Ù client/lib/supabase.ts Ø¨ÙŠØ­Ø§ÙˆÙ„ ÙŠØ¹Ù…Ù„ createClient Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠÙØªØ­. Ù„Ùˆ Ø§Ù„Ù€ .env Ù…Ø´ Ù…Ù‚Ø±ÙˆØ¡ Ø£Ùˆ ÙÙŠÙ‡ Ù…Ø³Ø§ÙØ© ØºÙ„Ø·ØŒ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø¨ØªØ¨Ù‚Ù‰ undefined Ø£Ùˆ "" (Ù†Øµ ÙØ§Ø¶ÙŠ). Ù…ÙƒØªØ¨Ø© Supabase Ø¨ØªØ¹Ù…Ù„ Hard Crash (Ø¨ØªÙˆÙ‚Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒÙ„Ù‡) Ù„Ùˆ Ø§Ù„Ù€ URL Ù…Ø´ Ø³Ù„ÙŠÙ…ØŒ ÙØ§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙŠÙ…ÙˆØª Ù‚Ø¨Ù„ Ù…Ø§ ÙŠÙ„Ø­Ù‚ ÙŠØ¹Ø±Ø¶ Ø£ÙŠ Ø´Ø§Ø´Ø©.

Ø¹Ø´Ø§Ù† Ù†ØµÙ„Ø­ Ø¯Ù‡ØŒ ÙˆÙ†Ø®Ù„ÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ´ØªØºÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙŠØ¨ (Replit) ÙˆØ§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (Expo Go) Ø¨Ø³Ù„Ø§Ù…ØŒ Ù…Ø­ØªØ§Ø¬ÙŠÙ† Ù†Ø¹Ù…Ù„ "Ø¯ÙØ§Ø¹Ø§Øª" (Defensive Coding) ÙˆÙ†Ø¸Ø¨Ø· Ø§Ù„Ù€ Linking Ù„Ù„ÙˆÙŠØ¨.

Ø®Ø¯ Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª Ø¯Ù‡ Ù„Ù€ ReplitØŒ Ù‡ÙŠØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¯ÙŠ Ø¬Ø°Ø±ÙŠØ§Ù‹:

The "Crash Fix & Web Preview" Prompt
Markdown

Act as a Senior React Native Engineer. We need to fix a critical **Initialization Crash** and **Web Navigation Issue**.

**Diagnosis:**
1. The app crashes immediately on Expo Go because `supabase-js` throws an error if `SUPABASE_URL` is empty/missing during initialization.
2. On Replit Web Preview, navigation clicks are ignored because the `NavigationContainer` lacks a `linking` configuration for the Web history API.

**Execute the following fixes:**

### **Fix 1: Robust Supabase Initialization**
**Target File:** `client/lib/supabase.ts`
Modify the initialization logic to prevent the app from crashing if keys are missing.
1. Check if `EXPO_PUBLIC_SUPABASE_URL` and `EXPO_PUBLIC_SUPABASE_ANON_KEY` are valid strings.
2. If they are missing/empty, do NOT call `createClient` immediately. Instead, export a helper or a "mock" client that logs a warning to the console, or handle the error gracefully so the UI can still render an error message instead of a white screen/crash.
3. *Ideally:* Throw a visible `Alert.alert` (on native) or `console.error` (on web) explaining that `.env` is missing, but keep the app alive.

### **Fix 2: Web Navigation Support (Deep Linking)**
**Target File:** `client/App.tsx`
1. Define a `linking` configuration object compatible with `react-native-web`.
   ```typescript
   const linking = {
     prefixes: [Linking.createURL('/')],
     config: {
       screens: {
         Login: 'login',
         Admin: {
           screens: {
             Dashboard: 'admin/dashboard',
             // ... map other screens
           }
         },
         // ... map Dispatcher, Restaurant, Driver roots
       },
     },
   };
Pass this linking prop to the <NavigationContainer> component. This allows the URL bar in the browser (and Replit Preview) to update and handle navigation correctly.

Fix 3: Verify Entry Point
Target File: client/index.js Ensure registerRootComponent(App) is called correctly, which is required for Expo Web to mount the app in the DOM.

APPLY THESE FIXES IMMEDIATELY.


---

### **Ø®Ø·ÙˆØ© ÙŠØ¯ÙˆÙŠØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹ (Ø¹Ø´Ø§Ù† Replit ÙŠÙ‚Ø±Ø£ Ø§Ù„Ù€ Keys):**

ÙÙŠ ReplitØŒ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù…Ù„Ù `.env` Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù…Ø§Ø¨ÙŠØ´ØªØºÙ„Ø´ ØµØ­ Ù…Ø¹ Expo. Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ø¶Ù…Ù†:
1.  ÙÙŠ Ø´Ø§Ø´Ø© ReplitØŒ Ø¯ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© **"Secrets"** (Ø§Ù„Ù‚ÙÙ„) ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Tools).
2.  Ø¶ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù‡Ù†Ø§Ùƒ ÙŠØ¯ÙˆÙŠ:
    * Key: `EXPO_PUBLIC_SUPABASE_URL`
    * Value: (Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø¨ØªØ§Ø¹Ùƒ)
    * Ø¯ÙˆØ³ **Add**.
    * Key: `EXPO_PUBLIC_SUPABASE_ANON_KEY`
    * Value: (Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨ØªØ§Ø¹Ùƒ)
    * Ø¯ÙˆØ³ **Add**.
3.  **Ù…Ù‡Ù…:** Ø§Ø¹Ù…Ù„ **Stop** Ù„Ù„Ø³ÙŠØ±ÙØ± ÙˆØ´ØºÙ„Ù‡ ØªØ§Ù†ÙŠ Ø¹Ø´Ø§Ù† ÙŠØ³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¯ÙŠ.

Ø¬Ø±Ø¨ ÙˆÙ‚ÙˆÙ„ÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø©.. Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ ØªÙØªØ­ Ø§Ù„Ù…Ø±Ø© Ø¯ÙŠ! ğŸš€